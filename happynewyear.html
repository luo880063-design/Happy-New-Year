<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>Happy New Year — To 小瑶</title>

<style>
:root{
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);
  --safe-right: env(safe-area-inset-right);
}

/* ===== 离线本地字体（手机稳定花体） ===== */
@font-face{
  font-family:"GreatVibesLocal";
  src:url("./fonts/GreatVibes-Regular.woff2") format("woff2");
  font-display:swap;
}
@font-face{
  font-family:"ZhiMangXingLocal";
  src:url("./fonts/ZhiMangXing-Regular.woff2") format("woff2");
  font-display:swap;
}

html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#000;
  -webkit-font-smoothing:antialiased;
  text-rendering:geometricPrecision;
}

canvas{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
}

/* ===== 文字层 ===== */
.overlay{
  position:fixed;
  inset:0;
  padding:
    calc(6vh + var(--safe-top))
    calc(6vw + var(--safe-right))
    calc(6vh + var(--safe-bottom))
    calc(6vw + var(--safe-left));
  display:grid;
  place-items:center;
  z-index:10;
  pointer-events:none;
}

.card{
  max-width:min(1100px,94vw);
  padding:26px 22px;
  border-radius:26px;

  /* ⭐ 关键：通透玻璃感，不挡烟花 */
  background:
    radial-gradient(900px 420px at 50% 18%, rgba(255,255,255,.08), rgba(0,0,0,0) 60%),
    rgba(0,0,0,.18);

  backdrop-filter: blur(10px) saturate(140%);
  -webkit-backdrop-filter: blur(10px) saturate(140%);

  box-shadow:
    0 18px 60px rgba(0,0,0,.45),
    0 0 70px rgba(255,120,220,.12),
    0 0 70px rgba(120,220,255,.10),
    inset 0 0 0 1px rgba(255,255,255,.18);

  text-align:center;
  color:#fff;
}

/* ===== 字体 ===== */
.line1{
  font-family:"GreatVibesLocal","Snell Roundhand","Apple Chancery","Brush Script MT",cursive;
  font-size:clamp(48px,9vw,110px);
  letter-spacing:1px;
  margin:0 0 6px;
  text-shadow:0 0 18px rgba(255,255,255,.25);
}

.line2{
  font-family:"GreatVibesLocal","Snell Roundhand","Apple Chancery","Brush Script MT",cursive;
  font-size:clamp(28px,5.5vw,56px);
  margin:0 0 14px;
  opacity:.95;
}

.line3{
  font-family:"ZhiMangXingLocal","HanziPen SC","STXingkai","Kaiti SC","KaiTi","PingFang SC","Microsoft YaHei",sans-serif;
  font-size:clamp(24px,4.8vw,42px);
  line-height:1.75;
  margin:0;
  text-shadow:0 3px 14px rgba(0,0,0,.6);
}

/* 手机再优化一点 */
@media(max-width:480px){
  .overlay{ padding: calc(4.5vh + var(--safe-top)) 5vw calc(5vh + var(--safe-bottom)); }
  .card{ padding:22px 18px; }
  .line1{ font-size:clamp(42px,9.5vw,88px); }
  .line2{ font-size:clamp(24px,5.8vw,48px); }
  .line3{ font-size:clamp(22px,5vw,36px); }
}
</style>
</head>

<body>

<canvas id="fx"></canvas>

<div class="overlay">
  <div class="card">
    <div class="line1">Happy New Year</div>
    <div class="line2">— To 小瑶</div>
    <p class="line3">
      2025年我做过最正确的决定，就是走进你的生活。谢谢你愿意陪我这个幼稚又笨拙的人。<br>
      我想把往后的每一个岁末年初都留给你，不仅是第一个，还有以后的每一个。
    </p>
  </div>
</div>

<script>
/* ===== 慢、浪漫、不卡的烟花 ===== */
const canvas=document.getElementById("fx");
const ctx=canvas.getContext("2d");
let W,H,DPR=Math.min(2,window.devicePixelRatio||1);

function resize(){
  W=innerWidth;H=innerHeight;
  canvas.width=W*DPR;canvas.height=H*DPR;
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
addEventListener("resize",resize);resize();

const fireworks=[];
function rand(a,b){return a+Math.random()*(b-a);}

class Firework{
  constructor(){
    this.x=rand(W*0.2,W*0.8);
    this.y=H+20;
    this.ty=rand(H*0.25,H*0.55);
    this.vy=rand(-2.2,-1.6);
    this.hue=rand(0,360);
    this.p=[];
  }
  update(){
    this.y+=this.vy;
    this.p.push({x:this.x,y:this.y});
    if(this.p.length>40)this.p.shift();
    if(this.y<=this.ty)this.explode();
  }
  draw(){
    ctx.strokeStyle=`hsla(${this.hue},100%,70%,.7)`;
    ctx.beginPath();
    this.p.forEach((pt,i)=>i?ctx.lineTo(pt.x,pt.y):ctx.moveTo(pt.x,pt.y));
    ctx.stroke();
  }
  explode(){
    for(let i=0;i<120;i++){
      particles.push(new Particle(this.x,this.y,this.hue));
    }
    this.dead=true;
  }
}

class Particle{
  constructor(x,y,h){
    this.x=x;this.y=y;
    const a=rand(0,Math.PI*2);
    const s=rand(.6,2.4);
    this.vx=Math.cos(a)*s;
    this.vy=Math.sin(a)*s;
    this.h=h;
    this.life=1;
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.vy+=.02;
    this.life-=.015;
  }
  draw(){
    ctx.fillStyle=`hsla(${this.h},100%,70%,${this.life})`;
    ctx.fillRect(this.x,this.y,2,2);
  }
}

const particles=[];
function loop(){
  ctx.fillStyle="rgba(0,0,0,.15)";
  ctx.fillRect(0,0,W,H);

  if(Math.random()<.03)fireworks.push(new Firework());

  fireworks.forEach(f=>{f.update();f.draw();});
  particles.forEach(p=>{p.update();p.draw();});

  fireworks.splice(0,fireworks.filter(f=>f.dead).length);
  particles.splice(0,particles.filter(p=>p.life<=0).length);

  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
